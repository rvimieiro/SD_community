112

Reasoning With Qualitative Probabilities
Can Be Tractable

Moises Goldszmidt
<

Abstract
We recently described a formalism for rea­
soning with if-then rules that are expr essed

with different levels of firmness [18].

The
formalism interprets these rules as extreme
conditional probability statements, specify­
ing orders of magnitude of disbelief, which
impose const1·aints over possible rankings of
worlds. It was shown that, once we compute
a priority function z+ on the rules, the de­
gree to which a given query is confirmed or
denied can be comp uted in O(lob rl.) proposi­
tional satisfiabi lity tests, where n is the num­
ber of rules in the knowledge base. In this
paper, we show that computing z+ requires
O(n2 x logn) satisfiability tests, not an ex­
p onent i al number as was conjectured in [18],
which reduces to polynomial complexity in
the case of Horn exp ressi o n s . Vi'e also show
how reasoning with imprecise observations
can be incorporated in om formalism and
how the popular notions of belief ret,ision and
epistemic entrenchment are embodied natu­
rally and tractably.

1

Introduction: Infinitesimal
Probabilities,

Rankings and

Common Sense Reasoning

The uncertainty encountered in com�r :·n sense reason­
ing fluctuates over an extremely wide range. For ex­
ample, the probability that the new b oo k on my desk
is about astrology is less than one in a million. If how­
ever, I spot a Zodiac sign on page 1. the probability
becomes close to 1 , say 0.999. Intelligent agents are
expected to reason with such r are eventualities and to
produce explanations and actions whenever these oc­
cur. Given this wide range of uncertainty fluctuations
and the fact that the majority of everyday decisions in­
volve relatively low payoffs, the full precision of prob­
ability calculus may not be necessary, and a.n ordei'­
of-magnitude approxim ation may be su ffi cient . Thus,

>

Judea Pearl

judea@cs.ucla.edu >
Cogni tive Systems Laboratory, Compu ter Science Department,
University of California, Los Angeles, CA 90024
moises@cs.ucla.edu

<

instead of measurin g probabilities on a s cale from zero
t.o one, we can imagine projecting probability measures
onto a quantized logarithmic scale and then treating
beliefs that map onto two different quanta as being of
different orders of magnitude.
This method of approximation gives rise to a semi­
qualitative calculus of uncertainty, one in which de­
grees of (dis)belief are ranked by non-negative integers
(corresponding perhaps to linguistic quantifiers such as
"believable," "unlikely," "very rare") still capable of
accounting for retraction and restoration of beliefs by
Bayesian conditionalization. The origin of this approx­
imation can be traced back to E r nest Adams [1], who
developed a logic of conditionals based on infinitesimal
probabilities, and to the Ordinal Condition Functions
of Spohn (29]. Potential applications in nonmonotonic
reasoning were noted in [21, 23] and further developed
in (20, 16, 25, 17, 18, 8].
A simple way of viewing infinitesimal probabilities is
to consider an ordinary probability function P defined
over a set n of possible worlds (or states of the wo rld )
w and to imag ine that the probability P (w) is a poly­
nomial function of some infinitesimal parameter <:, ar­
bitrarily close to, yet bigger than zero; for example
1 - c1t: or t:2- c2t:4• Accordingly, the p robabilities as­
signed t.o any subset of n represented by a logical for­
mula t.p, as well as all conditional probabilities P('li'[!f'),
will be ration al functions of<:. We define the ranking
function �( 1/•l'f') 1 as the power of the most significant
e--term in the expansion of P(
). In other words,
�(¢jt.p) = n iff P('ifl:p) has the same order of magni­
tude as e".

'li'I'P

The following properties of ranking functions (left­
hand side below) reflect, on a logarithmic scale, the
usual properties of probabili t y functions (right-hand
sid e ) , with "min" replacing addition, and addition re­
placing multiplication:
�(:p)

=

min ��:(w)

wl='l'

P(t.p)
P(t.p)

1 Spohn [29J called this function
Ordinal Condition Function.

=

+

2: P(w)

wl='l'

P(-ot.p)

=

1

(1)
(2)

a "non-probabilistic"

113

Reasoning with Qualitative Probabilities Can Be Tractable

P(r/J A .p)

=

P(r/JI<p)P(\0)

(3)

Parameterizing a probability measure by c: and ex­
tracting the lowest exponent of c: as the measure of
(dis)belief is proposed as a model of the process by
which p eople abstract qualitative beliefs from numer­
ical probabilities and accept them as tentative truths.
For example, we can make the following correspon­
dence between linguistic quantifiers and en:
o
P(<P)=e:
P(<P)- e:'
P(fjJ)- e:"
P(<P)- e:3

<P and -.¢ are believable
-.¢ is believed
-.¢ is strongly believed
-.¢ is very strongly believed

�> (</J)- 0
�<;(4>)- 1

�>(¢)- 3
- 3
�>(¢)

given is not sufficient for defining a complete ranking
function. In order to draw plausible conclusions from
such fragmentary pieces of information, we require ad­
ditional inferential machinery that should accomplish
two functions: First, it should enrich the specification
of the ranking function with the needed information
and, second, it should operate directly on the speci­
fication sentences in the knowledge base, rather than
on the rankings of worlds (which are too numerous to
list). Such machinery is provided by a formalism called
system-z+ [18] which accepts knowledge in the form of
quantified if-then rules (e.g., "birds fly (with strength
6)") and computes the plausibility of any given query
(e.g., "Tim, being a red-bird, flies (with degree 6')")
by syntactic manipulation of these rules.
To accomplish these functions, system-z+ incorpo­
rates two principles in addition to those given above:

These approximations yield a probabilistically sound
calculus, employing integer addition, fr,r manipulating
the orders of magnitude of disbelief. The resulting
formalism is governed by the following principles:

a non-negative integer K
representing the degree of surprise associated with
finding such a world.

1. Each world is ranked by

2.

Each well-formed formula (wff) is given the rank
of the world with the lowest �< (most normal
world) that satisfies that formula.

3. Given a collection of facts¢, we say that 17 follows
from ,P with strength 6 if 1;(17!¢) > 6, or, equiv­
alentl y, if the K rank of ¢ /\
degrees above that of ¢ /\ u.

-,17

is at least 6 + 1

Principle s 1 and 2 follow immediately from the scman­
t cs de�cribed �bove. Principle 3 says that 17 is plau­
Sible g1ven ¢ Iff ?(1711/J) 2:: 1 - cc6, where P is the
c�parametri�ed probability associated with that par­
tlcular ra nkmg "-· This abstraction of probabilities
matches the notion of plain belief in ,,l t at it is deduc­
tively closed; tllC price we pay, however, is that many
. .
small probabthtles do not accumulate into a strong ar­
gument (as in the lottery paradox).

�

�

?

The asic K ranki�g system, as described in Spohn [29],
r �qmres the spenfication of a complete ranking func­
tiOn before reasoning can commence. In othe1· words,
the knowledge base must be sufficiently rich to define
the K associated with every world w. Unfortunatelv
·
in practice, such specification is not readily availabl� .
For example, we might be given the information that
"birds �orm ally fly" (written �.:(-.Jib) > 0) and no in­
f�rmatlOn whatsoever about the fl ying habits of red
buds or non-birds. \Ve still would like to conclude that
red birds normally fly, even t hough the information
2If A is believed and B is believed then AI\B is believed.
�ate. that this deviates form the threshold conception of be­
lief: If both P( A) and P( B) are above a certain threshold '
P( A 1\ B) may still be below that same threshold.

4. Each input rule "if r.p then '1/J ( w i th strength 6),"

written r.p � 1/J, is interpreted as a constraint on
the ranking ,., forcing every world in <p 1\ -,'ljJ to
rank at least 6 + 1 degrees above the most normal
world in r.p, that is, ��:(!fl<p) > 6.

5. Out of all rankings satisfying the constraints
above, we adopt the (unique) ranking ,_+ that as­
signs each world the lowest possible (most normal)
rank.

�rinciple

4 corresponds to the notion of consistency
Def. 2.2, and Principle 5 establishes that the in­
forma�ion in the set of if-� hen rules (the knowledge
.
base) IS completed by asstgnmg the maximum like­
lihood possible to each world allowed by the consis­
tency constraints imposed by these rules (see Def. 2.3
and [18]). The first contribution of this paper is to
improve the inference process of system-z+ and es­
tablish its tractability. A key step in the procedures
developed in [18] was the computation of a priority
ranking z+ on the rules in the knowledge base, which
was conjectured to be intractable. In Section 3 (after
some preliminary definitions in Section 2), we present
a pr?cedure for computing z+ that requires a p oly­
llOITIIal number of propositional satisfiability tests and
hence is tractable in applications permitting restricted
languages, such as Horn expressions, network theories,
or acyclic databases.
m

The second contribution of this paper is to equip
with �he capability to reason with soft ev­
tdenc� ?r 1�n�ree�se observations (Section 4). Such a
capab1hty 1s Important when we wish to assess the
plausibility of u (using Principle 3 above) but the con­
text ¢ is not given with absolute certainty. In other
words, there is some vague testimony supporting ,p but
th�t testimony is undisclosed (or cannot be articulated
usmg the basic propositions in our language, e.g., tes­
tunony of the senses); all that can be ascertained is a
summary of that testimony saying that ",P is supported
to a. degre� n." We propose two different strategies
for computmg a new ranking �<' from an initial one 1£
�ystem-Z

�

'

114

Goldszmidt and Pearl

given soft evidential report supporting a wff 4J. The
first strategy, named J-conditionalization, is based on
Jeffrey's Rule of Conditioning [24]. It interprets the re­
port as specifying that "all things considered," the new
degree of disbelief for -.¢should be �>'(-.¢) = n. The
second strategy, named L-conditionalization, is based
on the virtual evidence proposal described in [2 3]. It
interprets the report as specifying the desired sllift in
the degree of belief in ¢, as warranted by that report
alone and "nothing else considered." We show that
L-conditionalization has roughly the same complexity
as ordinary conditionalization, and then we relate our
formalism to the theory of belief revision in [2]. Fi­
nally, Section 5 summarizes the mai1: ::esults.

rule r.p !.... 1/.> violated, given that we know r.p. In prob­
abilistic terms, consistency guarantees that for every
c > 0, there exists a probability distribution P such

that if 'Pi � 1/.>i E 6., then P( 1/.>;lr.p;) � 1-

cc6;.

Definition 2.3 (The ranking,.+)
r; = 'Pi � 1/.>i} be a consistent set

�

The distinguished ranking ,_+, defined below, assigns
to each world the lowest possible rank permitted by
the admissibility constraints of Eq. 5 (Def. 2.2). Such
an assignment reflects the assumption that, unless we
are forced to do otherwise, each world is considered as
normal (likely) as possible.
Let

=

of rules.

defined as follows:

Preliminary Definitions: The

2

,.+(w)

Ranking,..+

We start with a set of rules � = { 1'; I 1'; = tp; �
t/Ji, 1 � i � n}, where r.p; and 1/;; are propositional

formulas over a finite language of atomic propositions,
"-" denotes a new connective, and 8; is a non-negative
integer. A truth valuation w of the atomic propositions
in the language will be called a world. The satisfaction
w

of a wff r.p by a world
is defined as usual and denoted
w
w
satisfies r.p. Let n
is a model for r.p if
by w F r.p.
stand for the set of possible worlds. Ranking functions
are defined as follows:

Definition 2.1 ( Ranking s ) A ranking function�>
is an assignment of non-negative integers to the ele­
ments in n, such that �>(w) = 0 for at least one world
w E n. We extend this definit.ion to 1•1duce rankings
on wffs:
��:

( 'P) =

{

mi11w1=..,
oo

( )

��: w

if t.p is satisfiable,
.
otherWise.

(4)

Similarly, given two wffs 'P and 1j; such that r.p is sat­
isfiable , we define the conditional ranking ��:( 1/!lr.p) as
1'( t/Jjcp) = "' ( tJ! A cp) - K( 'P) .
Definition 2.2 (Consistency) A ranking
to be admissible relative to a given �. iff

��:(cp;

(\

tPi) +

8; <

h:(tp;

1\

-.ljJi)

��:

is said

(5)

(equivalently �>(...,ti';jr.p;) > 6;) for every rule r.p; � t/.•; E
A set � is consistent iff there exists an admissible
ranking K relative to �.

�.

Consistency can be decided in 0(1�12) satisfiability
tests , and it is independent of the 8-values assigned to
the rules in 6. [18]. Eq. 5 echoes the usual interpreta­

tion of defaults rules [28}, according t J which 1/.> holds
in all minimal models for r.p. In our case, minimality
is reflected in having t.l1e lowest rank, that is the high­
w
est possible likelihood. If we say that
falsifies or
w

rule r.p !.... lj! whenever
F 'P 1\ -,'lj_•, the pa­
rameter {) can be interpreted as the minimal degree of
surprise (or abnormality) associated with finding the

violates a

where

-

_

{0

{r; I
,.+ IS

if w does not falsify any rule in �.
max..,1=10,".,.p, [Z+(r;)] + 1 otherwise,

z+ (r;)

(6)

is a priority ranking on rules, defined by

z+(r;) =

min

"'F"''""''

(7)

[x:+(w)] + 8;.

The recursive nature between Eqs. 6 and 7 is be­
nign, and we present an effective procedure, Procedure
Z_rank, for computing z+ in the next section. In [18],
we also show that Eqs. 6 and 7 define a unique admis­
sible ranking function ,.+ that is minimal in the fol­
lowing sense: Any other admissible ranking function
must assign a higher ranking to at least one world and
a lower ranking to none.
An alternative mechanism for enriching the original
specification of a ranking (probability) function in the
form of a set of conditional if-then rules is studied
in [17], where Maximum Entropy principle is used to
select a privileged distribution among those probabil­
ity distributions complying with the constraints im­
posed by the rules. In the language of rankings, this
distribution can be represented as a set of recursive
equations similar to Eqs. 6 and 7:3
,.• w

( )

::::

{0

does n?t falsify any rule �n �.
L:w!=<p,i\.,.p.[. Z ( r, )] + 1 otherWISe.
if

w

(8)

The computation of the z• priorities and the query­
answering procedures for the ma.ximum entropy ap­
proach has been proven to be NP-hard even for Horn
clauses (see [4]).

3

Plausible Conclusions: Computing
the z+-rank

Given a set

�.

each admissible ranking

consequence relation

��:( ..,cr

¢> )

�·

� cr

where ¢

h:

induces a

iff ��:( cr A¢)

<

A straightforward way to declare cr as
a plausible conclusion of � given ¢> would be to re­
quire 4J
cr in all x: admissible with
This leads
1\

.

�

K+

�.

3The equation for z• is identical to that of

replaced with

,;;•).

z+

(with

Reasoning with Qualitative Probabilities Can Be Tractable

to an entailment relation called e:-semantics [23], 0entailment [25], and r-entailment (20], which is recog­
nized as being too conservative. The approach we take
here is to select a distinguished admissible ranking, in
our case ��:+, and declare u asa plausible conclusion of
�given¢, written¢ kr -y, iff K +(¢ 1\ ff \ < ��:+(¢/\•0").4
According to Eq. 6 n
i Def. 2.3, both ��:+ and I+
can be computed effectively once the priority rank­
ing z+ on rules is known. We next present a pro­
cedure for computing z+' which is identical to the
one presented in [18] save for the crucial computation
of Eq. 9 (Step 3(b) ). Whereas in [18] this computa­
tion wasthought to require an exponential search over
worlds, we now show that it can be accomplished in
0(1�1 x log 1�1) satisfiability tests. Some of the steps
in Procedure Z_rank depend upon the notion of toleration. A rule ¢ .!.... O" is tolerated by � if the wff
¢ 1\ O" /\; 'Pi ::> tPi is satisfiable (where i ranges over all
rules in �).5
Procedure Z..rank
Input: A consistent knowledge base

�.

Output:

z+­

ranking on rules.
1. Let

�0

nz+

be the set of rules tolerated by
be an empty set.

�.

and let

= 'Pi � 1/Jj E �o. do: set Z ( r;) =
nz+ u {ri}.
3. While nz+ #- �. do:
(a) Let �+ be the set of rules in �I = �- nz+
tolerated by ��

2. For each rule 1';

6; and nz+

=

6

(b) For each r :¢ - (1 E � +, let r.lr denote the
set of models for ¢ 1\ l1 that do not violate any
rule in

f:..': compute

Z(1·) == min [n:(w,.)] + b

(9)

Wrtnr

where

n: wr

(

)

=

(1 0)

max {Z(rj)lwrF'Pj/\•1/;j}+l

rienz+

(c)

�i

'RZ+ . 6
Let r• be a rule in fl.+ having the lowest
nz+ = n.z+ u {r*}.
and

ri : 'Pi

---.

tPi

E

Z; set

End Procedure

Theorem 3.1 establishes the correctness of Procedure
Z_rank, while Lemmas 3.2 and 3.3 and Theorem 3.4
determine its (polynomial) complexity.
•u we are concerned with the strength fJ wi t. h which

the conclusion is endorsed, then¢>

K+(!/1

A

-.u).

J{- "I iff,..+(¢> Au)+ fJ <

!>The notion of toleration is also crucial for deciding con­
sistenc y : ll. is consistent iff there is a tolerated default rule
in every nonempty subset ll.' of ll. (Theorem
6Note that Eqs.

Def. 2.3.

9

1, [18]).

and 10 correspond to Eqs. 7 and

6

in

Theorem 3. 1 ([18]) The function Z computed
Z_rank complies with De[ 2. 9, that is Z = z+ .

by

�·

Let � = { l'i I r; = <p; � tPi} be a consistent set where the rules are sorted in nondecreasing
order according to priorities Z( ri). Let ��:(w) be defined
as in Eq. 6:

Lemma 3.2

�>( )
w

=

{ ma
0

ifw does not falsify any rule in � . (ll)
x_., I=.,.; " .... .p, [Z( r;)] + 1 athenmse.

Then, for any wff ¢, ��: ( ¢) can be computed
O(log I�IJ propositional satisfiability tests.

m

The idea is to perform a binary search on � to find
the lowest Z(1·) such that there is a model for¢that
does not violate any rule r1 with priority Z(r1) 2::
Z(t•). This is done by dividing � into two roughly
equal sections: top-half (rmid to Thigh) and bottom­
half (rrow to rmid ) · A satisfiability test on the wff
a = ¢ /\� � �• id 'Pi :J tPi decides on whether the search
should continue (in a recursive fashion) on the bottom­
halfor on the top-half.7
The value of Z(¢ .!.... O" ) in Eq. 9 can be
computed in O(log IRZ+I) satisfiability tests.

Lemma 3.3

Let �� in Step 3(a) be equal to {'Pi � 1/J;}; the com­
putation of Eq. 9 is equivalent to computing the 11: of
the wff O" 1\¢ /\i cp; ::> tPi where i ranges over all the
rules in f:..', by performing the binary search on the set
n.z+.

Given a consistent �� the computation
of the ranking z+ requires 0( 1�12 x log 1�1) satisfia­
bility tests.

Theorem 3.4

Computing Eq. 9 in Step 3(b) can be done
in O(log 1nz+ I) satisfiability tests according to
Lemma 3.3,8 and since it will be executed at most
0(1 �1) times, it requires a total of 0(1�1 x log 1�1).
Loop 3 is performed at most 1�1- l�ol times, hence
the whole computation of the priorities z+ onrules re­
quires a total of 0(1 �12 x log I � I) satisfiability tests.9
Once z+ is known, determining the strength fJ with
which an arbitrary query O" is confirmed, given the
information ¢, requires O(log 1�1) satisfiability tests:
7

and

For reasons of space, formal proofs of Lemmas 3.2

3.3,

and T heorem

3.4

can be found in the Technical

Report available by request.

nz+
nz+

8Note that we need
to be sorted, nondecreasingly,
with respect to the priorities Z. This requires that the
initial values inserted in
in Ste p 2 of Procedure Z.rank

be sorted

- O(Jll.oJ2)

data comparisons - and that the

new Z-value in Step 3(c) be i n serte d in the right place­
I) data comparisons. We are assuming that the
cost of each of these operations is much less than that of a
satisfiability test.

O(i'R.z+

9The complexity of the remainding steps in the proce­

dure is bounded by

O(jll.i) satisfiability tests.

115

116

Goldszmidt and Pearl
First N:+(¢1\u) and N:+(¢1\"'""u) are computed, using a
binary search as in Lemma 3.2. Then, these two val­
ues are compared and the difference is equated with
the strength 6. Clearly, if the rules in � are of Horn
form, computing the priority ranking z+ and deciding the plausibility of queries
polynomial time [10].

(¢ 1{. (f)

can

b e done in

Belief Change, Soft Evidence, and

4

Imprecise Observations

If u was defined as a pair of Boolean
) where ¢ (the context) stands for the
of observations at hand and u (the target) stands

So far, a query ¢
formulae(¢,
set

(f ,

for the conclusion whose belief we wish to confirm,
deny, or assess. A query (¢,(f) would be answered in
the affirmative if (f was found to hold in all mi nim a lly
ranked models of¢, and the degree of r:.elief in (f would
be given by K(-.u 1\ ¢)- te(u 1\ ¢).
In many cases, however, the queries we wish to answer
cannot be cast in such a format, because our set of
observations is not precise enough to be articulated as
a crisp Boolean formula. For example, assume that
we are throwing a formal party and our friends Mary
and Bill are invited. However, judging form their pre­
vious behavior, we believe that "if Mary goes to the
party, Bill will stay home (with strength 6)," written M .!..... -.B. Now assu me that we have a strong
hunch (with degree K) that Mary will go to the party
(perhaps because she is extremely well dressed and is
not consulting the movie section in the Times) and we
wish to inquire whether Bill will stay home. It would
be inappropriate to query the system with the pair
(M, -.B), because the context M has not been estab­
lished beyond doubt. The difference could be critical
if we have arguments against "Bill staying home," for
example, that he was seen renting a tuxedo. A flex­
ible system should allow the user to assign a degree
of belief to each observational proposition in the con­
text ¢ and proceed with analyzing their rational con­
sequences. Thus, a query should consist of a tuple like
(¢I.K1;¢2,K2; ... ,¢m,I<m: (f), where each/(; mea­
sures the degree to which the contextual proposition
ifl; is supported by evidence.10
At first glance it might seems that such facility is auto­
matically provided by system-z+, through the use of

variable-strength rules. For example, to express the

fact that Mary is believed to be going to the p ar ty ,

we can perhaps use a dummy rule Obs1 !i M (stating
that if Mary meets the set of observations Obs1 then
Mary is believed to be going to the party) and then
add the proposition Obs1 to the context part of the
query, to indicate that Obs1 has taken place.
10We remark that evidence in this paper is regarded as

setting the context of a query and not as a modifier of the
knowledge in �- Statistical methods for •.l1e l at er task are
explored in

[3].

This proposal has several shortcomings,

however.

First, the net impact of our new rule Obs1 � M would
be sensitive to previously collected information about
Mary's intentions (say she has bought a plane ticket)
that we may wish to suppress. In other words, we of­
ten wish to express the assessment that, all things
considered, Mary's going to the party is believed to
degree!(.
Second, in many systems it is convenient to treat if­
then rules as a stable part of our knowledge, unper­
turbed by observations made about a particular indi­
vidual or in any specific set of circumstances. This
permit.s us to compile rules into a structure that al­
lows efficient query processing. Adding query-induced
rules to the knowledge base will neutralize this facility.
Finally, mles and observations combine differently:

The latter should accumulate the former do not. For
example, if we have two rules a � c and b � c and

we observe a and b, system-z+ would believe c to a
degree max(61, 62). However, if a and b provide two in­
dependent reasons for b eliev ing c, the two observations
together should endow c with a belief that is stronger
than any one component in isolation. To incorporate
such cumulative pooling of evidence, we must encode
the assumption that a and b are conditionally indepen­
dent (given
which is not automatically embodied in

cj,

system-z+ .1

To avoid these complications, the method we propose
treats imprecise observations by invoking specialized
conditioning operators, unconstrained by a rule's se­
mantics. We distinguish between two types of eviden­
tial reports:

1.

Type-J: "All things considered," our current belief
in ifJ should become J.

2.

Type-L: "Nothing el se considered," our cur r ent

belief in ¢ should

4.1

shift by L.

Type-J: All Things Considered

Let ¢ be the wff representing the event whose belief we
wish to update so that ,._, ( -..p) = J (and, consequently,
�e'(¢) = 0).12 In order to compute K'(IP) for every wff
1/J, we rely upon Jeffrey's Rule of Conditioning [24].
Jeffrey's rule is based on the assumption that while
the observation changed the agent's degree of belief in
¢ and in certain other proposition, it did not change
the conditional degree of belief in any propositions
on the evidence ¢ or on the evidence -..p [24]. Thus,
letting P' denote the agent's probability distribution
after the report on the value of P'( ifJ) is incorporated,
11The assumptions of conditional independence among

converging rules is embodied in the formalism of Maximum
Entropy

[17].

12This is an immediate consequence of the semantics for
ra.nkings and corresponds to the normalization in proba­
bility theory (see Eq. 2).

Reasoning with Qualitative Probabilities Can Be Tractable

and, using P to denote the agent's probability distri­
bution prior to this report, we have13
(¢1•¢)
( 1¢)= P
'
P'
t/>
'(
¢1¢) and P
leads
to
Jeffrey's
rule,
which

=

P ( t,bl •¢ ) ,

Translated into the language of rankings {using Eqs. 13), Eq. 13 yields
( 1-..,9) + n:'( •¢) ] , (14)
(•1¢) + n:'(¢); �e
K1(1/>) = min[n:
¢
¢
which offers a convenient way of computing��:'(�·) once
we specify N.'(¢) = 0 and 1i.1(•ifJ) = J. Eq. 14 assumes
the an especially attractive form when computing the
'
��: of a world w:

(15)
Eq. 15 corresponds exactly to the a-conditionalization
proposed in Spohn [29] (
Def. 6, p. 117), with a= J.
If �>.' (...,4>) = oo, this process is equivalent to ordinary
Bayesian conditionalization, since k'(w) = k(wl¢) if
w I=¢ and ��:' (w) = oo otherwise. Note, however, that
in general this conditionalization is not commutative;
if 'Pl and ¢z are mutually dependent (i.e., ��:
¢
(zl¢11) :f.
"-(¢�2)),14 the order in which we establish t.:(•¢t)= J1
and ��: (-.¢2) = h might make a difference in our final
belief state, represented by the ranking k".15
Type-L Reports: Nothing Else
Considered

L-conditionalization is appropriate for evidential re­
ports of the type "a new evidence was obtained which,
by its own merit, would support ¢ to degree L." Un­
like J-conditionalization, the degree L now specifies
changes in the belief of ¢, not the absolute value of
the final belief in ,P. As in the case of type-J reports,
we assume that in naming ¢ as the dit·ect beneficiary
of the evidence, the intent is to convey the assumption
of conditional independence, as formulated in Eq. 13.
Next, we assume that the degree of support L charac­
terizes the likelihood-ratio ..\
(
ifJ) associated with some
undisclosed observation Obs, as is done in the method
of virtual conditionalizati on [23):
..\
()
¢1

=

O
( bsl¢)
P
Obsl•¢) '
P
(

(16)

13Eq. 12 is known as the J-cor1dition (24].
14Tbis condition mirrors probabilistic dependence, i.e.,
P(.P2i.Pd ;f; P(¢12).
lf>Spohn ((29], p. 118) has acknowledg, c1 the desirability
of commutativity in evidence pooling but has not stressed
that a-conditionalization commutes only in a very narrow
set of circumstances (partially specified by his Theorem
4). These circumstances require that. successive pieces of
evidence support only propositions that are relatively inde­
pendent - the truth of one proposition should not imply a
belief in another. Shenoy [2i) has corrected this deficiency
by devising a commutative combiuation rule which behaves
similar to 1-conditiouing.
·

P'(<l>)
-cP) .,..
-:::-:
P
,
-:-(
...,....,.

(12)
(13)

4.2

which governs the updates via the product rule
=

..\
(
¢)?(¢)
P (
• tP) .

(17)

Translated into the language of rankings, this assump­
tion yields

�i'(ifJ)- �i'(•cP) = x:(cfo)- K(•</1)- L

(18)

and, since either "'(cfo) or K1(•<P) must be zero, we ob­
tain
max[O; ��:.(¢)- ��:.(-.¢)- L],
max[O; K(-.<jl)- ��:
¢
() + L].

(19)
(20)

We see that the effect of L-conditionalization is to shift
the degree of disbelief difference between ¢ and -.,p by
the specified amount L. Once"'
(
¢) is known, we can
use Jeffrey's rule (
Eq. 14) to compute the t.:'(¢) for an
arbitrary wff 1/!, we have that��:'
(
'!/!)=

{

min[�i(¢1¢) + ��:
( 1--,¢1)]
(
¢)- �.:(-.ifJ)- L; ��:
1/!
min[��:( !PI¢); ��:(!J'I•<P) + �> ( •¢ ) + L- "-(¢))
min[t.:('l/!1¢); ��:(1/•I...,<P)]

(21)

depending on whether ��: ( •ifJ )+�i( <P) is less than, greater
than, or equal to L. This expression takes the following
form for ��:'(w):

t.:'(w) -

_

{ x:
��:(wl¢) max[O; ��:.(¢�)- "•
(¢)- L]
w
(l ¢) max[O; ,_(-.¢�)- ��:(cfo) L]
+

•

+

+

(22)

depending on whether w )= ¢> or w )= •¢1. As in J­
conditionalization, if L = oo then ��:.' (w) = K
(
wl</1).
For the general case, we can see that the effect of
L-conditionalization is to shift downward the K of all
worlds that are models of the supported proposition ,P
relaLive to the ,; of all worlds that are not models for
<,b. However, unlike J-conditionalization, the net rela­
tive shift is constaut and is equal to L, independent
of the initial value of x(¢). It is easy to verify that
L-conditionalization is commutative (as is its proba­
bilistic counterpart, see Eq. 17), and hence it permits
a recursive implementation in the case of multiple ev­
idence.
We can illustrate these updating schemes through the
party example consisting of the single rule rm : M �
-.B (''if Mary goes to the part.y, then Bill will not
go"). A trivial application of Procedure Z_rank yields
z+(,·m) = 4, and using Eqs. 4 and 6 we find x:(x) = 0
for every proposition x, except x = B A fl,f, for which
we have x+(!vf A B) = 5. This means that we have
no reason to believe that either Mary or Bill will go
to the party, but we are pretty sure that both of them
will not show up. Now suppose we see that Mary is
very well dressed, and this observation makes our be­
lief in I\1 increase to 3, that is, ��:+' (--,Af) = 3. As a
consequence, our belief in Bill staying home also in­
creases to 3 since, using either J-conditionalization or
L-conditionalization, ��:+'(B) = 3. Next, suppose that
someone tells us that he has a strong hunch that Bill
plans to show up for the party, but he fails to tell us

117

118

Goldszmidt and Pearl
why. There are two ways in which this report can influ­
ence our beliefs. The natural way would be to assume
that our informer has not seen Ivlary's dress, and might
not even be aware of Bill and Mary'" relationship hence we assess the impact of his report in isolation
and say that whatever the value of our current belief
in Bill going, it should increase by 3 increments, or
fj
L = 3. Following Eq. 2 1 , ��:+ (B) and K + " (-.M) will
both be equal to 0, and we are back to the initial un­
certainty about Bill or Mary going to the party, except
that our disbelief in both :Mary and Bill being at the
party has decreased to ,_+" ( M /1. B) = 2. The second
way would be to assume that our informer is omni­
sc ient and already has t aken into consideration all we
know about Bill and Mary. He means for us to revise
our rankings so that the final belief in ''Bill going" will
be fixed at ��:+" (-.B) = 3. With this interpretation, we
J-condition ��: + ' on the proposition ¢ = -.B and obtain
,;;+" (M) = 3, concluding that it is Mary who will not
show up to the party after all.
4.3

Complexity Analysis

From Eq. 1 4 we see that x:'('l/.') can b• computed from
x: (tf>i¢) and ��: (¥>1•¢ ) , which, assuming we have z+ ,
requires a logarithmic number of propositional satisfi­
ability tests (see Section 3). L-conditionalization can
follow a similar route, as depicted in Eq. 21.
Special precautions must be taken when simultaneous,
multiple pieces of evidence become available. First, J­
conditionalization is not commutative, hence we can­
not simply compute ,;,' by J-conditioning on ¢1 and
then J-conditioning K1 on 1>2 to get. K-11 • We must J­
condition simultaneously on ¢ 1 and ¢2 with their re­
spective J-levels, say h and Jz. Worse yet, an auxil­
iary effort must be expended to compute the J-level of
each combination of ¢'s, in our case ¢1 /1. ¢ z , ¢ 1 1\ •¢ 2 ,
etc. This is no doubt a hopeless computation when
the number of observations is large.
1-conditionalization, by virtue of it.s commutativity,
enjoys the benefits of recursive computations. Let e 1
and e2 be two (undisclosed) pieces of evidence sup­
porting ¢1 ( with strength L1 ) and ¢· (with strength
L2 ) , respectively. We first 1-condittun ,;; on ljJ1 and
calculate ��:'(¢ 1 ) and ,;:'(¢>2) using Eq. 20 and Eq. 21,
respectively. Applying Eq. 21 this time to ,;,1('1/1 1\ ¢2),
we calculate ,;;' (tf>l¢2 ). Second, we L-condition ��: ' on
¢2, compute K;11(¢2) using Eq. 20, and, finally, using
'
x: ( tf>l ¢ 2 ) and ,;:"(¢2 ) in Eq. 21 obtain ,;," ( iJ· ) Y' Note
that, although each of these calculations requires only
O(log I� I) satisfiability tests, this computation is ef­
fective only when we have a well designated target
hypothesis tjJ to est.ima.te. The computation must be
repeated each time we change the target hypothesis,
even when the context remains unaltered. This is so
because we no longer have a facility for encoding a
16The generalization to more than two pieces of evidence
is straightforward.

complete description of x:' , as we had for K (using the
z+ -function). Thus, the encoding for K: 1 may not be as
economical as that for K (the number of worlds is astro­
nomical), unless we manage to find dummy rules th at
emulate the constraints imposed on ¢1 by the (undis­
closed) observation. Such dummy rules must enforce
the conditional independence constraints embedded in
Eq. 13, without violating the admissibility constraints
(Eq. 5) in � (see [19]).
4.4

Relation to the AGM Theory of Revision

Alchourron, Gardenfors and Makinson (AG M) have
advanced a set of postulates that have become a stan­
dard against which proposals for belief revision are
tested [2] . The AG M approach models epistemic states
as deductively closed sets of (believed) sentences and
characterizes how a rational agent should change its
epistemic states when new beliefs are added, sub­
stracted, or changed . The central result of this theory
is that these postulates are equivalent to the existence
of a complete preordering of all propositions according
to their degree of epistemic entrenchment such that
belief revisions always retain more entrenched propo­
sitions in preference to less entrenched ones. However,
the AGM postulates do not provide a calculus with
which one can realize the revision process or even spec­
ify the content of an epistemic state [5, 1 1, 22] .
Spohn (29] has shown how belief revision conforming
to the AG M postulates can be embodied in the con­
text of ranking functions. Once we specify a single
ranking function K on possible worlds, we can asso­
ciate the set of beliefs with those propositions tf> for
which ,;; ( • 1/•) > 0. To incorporate a new belief j3,
one can raise t he x: of all models of -.j3 relative to
those of J], until k(-.j3) becomes (at least) 1, at which
point the newly shifted ranking defines a new set of
belief.<; . This process of belief revision, corresponding
to a·- conditioning (with a = 1 ) was shown to obey the
AGM postulates, from which it follows that revision
in the probabilistic. system described in this paper also
obeys those postulates under the same interpretation
of beliefs.
Still, neither the AGM theory nor Spoh n 's embodi­
ment of the theory are directly applicable to AI sys­
tems, the former because it does not provide a finite
specification for belief sets and their entrenchment or­
dering, and the latter because it requires an explicit
encoding of the ranking function on all possible worlds.
To better model AI practice, Nebel [22) adapted the
AGM theory so that finite sets of base propositions
mediate revisions. This is exemplified in the nonmono­
[ 6] , where the
tonic systems of Brewka [7] and Poole 2
base consists of propositional implications, or expecta­
tions [15] . The basic idea in these syntax-based sys­
tems is to define a (total) priority order on the set of
base propositions, and select revisions to be maximally
consistent relative to that order . Nebel has shown that
such a. str ategy, can satisfy almost all the AGM ax-

Reasoning with Qualitative Probabilities Can Be Tractable

i oms. Boutilier [5] has fu rther shown that, indeed, the
priority fu nction z+ corresponds naturally to the epis­
temic entrenchment ordering of the

AGI\1 theory.

17

Unfortunately, even Nebel 's theory does not com­
pletely su cceed at formalizing the practice of belief re­
vision, as it does not s pecify how the priority order on
the base propositions is to be determined.

Although

one can imagine, in principle, that the knowledge au­
thor specify this order in advance, such specification
would b e impractical, since the order might (an d , as

ditional statements.

Having the capability of adopting new conditionals (as
rules) also provides a simple semantics for interpreting
more complex sentences i nvolving conditionals ( e . g . ,
" I f you wear a helmet whenever y o u r i d e a motorcycle,

then you wont get hurt badly i f you fall" 19). Both
nested and negated conditionals cease to be a mystery
once we permit explicit references to defaul t rules. The
sentence "If (a ___. b) then ( c __,. d)" is interpreted as:
"If I add the default a - b to t., the n (c, d)
will be i n the consequence relation
� of the

we h ave seen, should) change whenever new rules are
added to the knowledge base.

resulting knowledge b ase 6.'

Thus we see that there are several computational and
epistemological advantages to our system over those
proposed by AG M and Spoh n , stemming fmm the fact
t h at our revision process revolves armmd a fi nite set
of conditional rules, not around the beliefs , the rank­
ings or t he expectations that emanate from those rules.
First , since the number of propositions in one's belief
set is astronomical, and so is the number of worlds, i t
i s a computational necessity t o base belief revision on
rules, whose number is usual l y manageable. Secon d ,
our system extracts both beliefs and rankings o f be­
l iefs automatically from the content of 6. ; no outside
specification of belief orderings is required.
Thir d , in order to facilitate recovery from obsolete ob­
servations Spohn 's framework m ust assume that all
observations are defeasible (or imprecise ) , which corre­

sponds to a-conditioning with a < oo . In our system,
we can accommodate both imprecise and precise obser­
vations (corresponding to

a = oo) using ordinary con­

d i t ioning . G i ven a set of precise observations ¢, the set
of beliefs is defined as those propositions u for which

,_( --,ul¢)

> 0. Retraction of obsolete observations can

b e done by simply removing those observations from

18

�

::::: t. U {a

__,.

b} ."

which i s clearly a proposition that can be tested i n the
language of default-based ranking systems.
Note the essential distinction between having a condi­

tional rule a -- b explicitly in t. and certifying that
f:o: b holds in the consequence relation o f .1. . The

a

former is a permanent constraint that interacts with

other rules to shape the priority order z+ 1 while the
latter indicates a contingent expectation ( certified by
the Ramsey test) that passively reflects that ordering.
This distinction gets lost i n systems such as Spohn's
or G iirdenfors ' [ 1 5] that do not acknowledge the cen­
trality of conditionals
ranking beliefs.

20

as

the basis for generating and

Conclusions

5

This paper proposes a belief-revision system that rea­
sons tractably and plausibly with l inguisti c quantifica­
tion of both observational reports (e.g. , "looks l ike" )
and domain rules (e.g . , "typically" ) . We h ave shown
that the system is semi-tractable, namely, tractable for

¢; . This flexibility is facilitated by mil ' ; 1t a ining a fixed
set of con ditional rules , w i th the help uf which one can
always restore beliefs (and rankings) so that. they re­

every sublanguage in w hich propositional satisfiabil­
ity is polynomial ( Horn expressions, network theories,

flect t he observations at han d , i ndependently of those
seen in the past.

edge, this is the first system that reasons with approx­
imate probabi l ities which offers such broad guarantees

Finally, and perhaps most significantly, our system is
capable of responding not merely to empirical obser­
vations but also to lingu istically transmitted infonna­
tion such as conditional sentences ( i . e . , if-then rules ) .
For example, sup p ose someone tells us t ha t 1\I ary too
tries to avoid Bill in parties; we simply ad d this in­

formation to our knowledge base in the form of a new
rule, B - ..., _H , reco mpute z + , an d are prepared to
respond to new observations or hearsay.

In Spohn's

system, where revisions are limited to a-conditioning,
one cannot properly revise beliefs in response to con-

acyclic expressions, etc . ) .

We expect these results to carry over
to the theory of possibility as formulated by Dubois
and Prade [ 1 2] , which has similar features to Spohn's
system except that beliefs are measured on the real

of tractability. 2 1

interval [0 , 1 ] . In addition we have shown that , with­
out loss of tractability, the system can also accommo­
d ate expressions of imprecise observations, thus pro1 8 G ardenfors [ 1 4] attempts to devise postulates for con­
ditional sentences, but finds them incompatible with the
Ramsey test (page 156-160). See also Boutilier
analysis of Ramsey test. and the AGM axioms
1�

1 7 The

p ro o f

in [.5] considers the priorities z+ resulting

fiat se t. of rules {<,�, � d•, } , namely one in which
are 0, as in system-Z [25] . Bou t i l •'I" abo shows [6]
an entrenchment ordtriug ob eying the A G M frame­

from a
all b, 's

that
wo r k obtains from the Z priorities of the negations of the
material counterpart of rules.

To the best of our knowl­

Example

[5] for an

due to Calabrese (personal comm u nica tion) .

Belief revision systems proposed in the database Jit.­
erature (1:1, 9] s u ffer from the same shortcoming. In th at
context defaults ( and conditionals) rep r esen t integrity con­
straints with exceptions.
20

2 1 Whereas most tract ability results exploit the topolog­
ical structure of the kn o wl edge base ( hypertrees, or partial
hypert rees ) , ours are topology-independent.

119

120

Goldszmidt and Pearl

viding a good model for weighing the impact of ev­
idence and counter-evidence on our beliefs. Finally,
we have shown that the enterprise of belief revision,
as formulated in the work presented in [2] , can find a
tractable and natural embodiment in system-z+ , un­
hindered by difficulties that plagued earlier systems.

[14.]

1 988.

[ 1 5] P. G ardenfors. Nonmonotonic inferences based on ex­
pectations: A pre li mi n ary report. In Principles of
Knowledge Representation a n d Reasoning: Proceed­
ings of the Second Interna tional Confe rence, pages
585-590, Boston, 1 99 1 .

Acknowledgements

[16]

This work was supported in part by N ational Science Foun­
dation grant #IRI-88- 2 1 444 and State of California MI­
CRO 90- 1 2 7 . The first author was supported by an I B M
graduate fellowship 1 990- 1 992.

[ 1 7]

E.

W . Adams.

The Logic of Conditionals. D . Reidel,

[2] C.

Alchourr6n, P. G iirdenfors, and D . Makinson. On
the logic of theory change : Partial meet contraction

and revision functions.
50:51 0-530, 1 98 5 .
[3) F . Bacchus.

loumal of Symbolic Logic,

R . Ben-Eliyahu.

Boutilier. What is a default priority?

In Proceed­

the Intemational Joint Conference in A 1·tificial Intel­
ligence ICA I-89}, Detroit, 1989.

(8]

(

W. Buntine.

M . Dalal.

4.4-5 1 ,

m alizing commonsense knowledge.
gence, 28:89-1 1 6 , 1 9 8 6 .

[22]

base revision: Preliminary report. In Pmccedings of
the Seventh National Confe rence on A l'tificial Intelli­
gence, pages 4.75-479, 1 98 8 .

[10] W . Dowling and J. G allier. Linear-time algorithms for
testing the satisfiabilit.y of propositional Horn fornm­
lae . Journal of Logic Progra mming, 3 : 267-281, 1 984.

[1 1] J . Doyle. Rational b elief revision ( preliminary report ) .
I n Proceedings of Principles of Knowledge Rep,·esenta­
tion and Reasoning, pages 1 63-171, Cambridge. Mas­
sachisetts, 1 99 1 .
[12] D . Dubois and H . Prade.

Possibility Theory:

An

Appmach to Compute rized Pmcessirz!J of Uncertain ty.

Plenum Press, New York, 1 988.

,

[13] R. Fag i n J . D. Ullman, aud :M. Vardi.
On t he
semantics of u p d a t es in databases.
In P,·ocecdings
of the

2nd

A CM SIGA CT-SlGMOD- SIGA R T Sympo

sium on Principles
365, 1 9 8 3 .

of

­

Database Systems. pag es 352-

A rtificial Intelli­

B . Nebel.
Belief revision and default reasonin g:
Synt ax-based app r o aches . In Proceedings of Principles
of Knowledge Representation and Reason ing, pages
4 1 7-4 28, Cambridge, Ma.ssachisetts, 1 99 1 .

[23] J . Pearl. Probabilistic Reasoning i n Intelligent Sys­
tems: Netwo1·ks of Plausible Inference. Morgan Kauf­

maun, San M ateo, C A , 1988.

(24]

Los Angeles . , 1 9 9 1 .

Investigations into a theory of knowledge

What does a conditional knowledge

[21] J. McCarthy. Applications of circumscription to for­

In Proceedings of the 7th Confuence on Unce 1·tainty
in A I, pages

[9]

Some proper ties of plausible reasoning.

Goldsz m id t and J . Pearl. System z+ : A formal­
ism for reasoning with variable strength defaults. In
Pmceedi ngs of A me rican A ssociation for A rtificial In­
telligence Conference, Anaheim, CA, 1 99 1 .

Torouto, 1 989.

1 992.

G . Brewka. Preferred su bt.heories: . I n ex te n d ed logi­
cal framework for default reasoning. In Pmceedings of

Boston, 1 990.

base entail?
In Proceedings of Principles of f(nowl­
edge Representation and Reas oning, pages 212-222,

ings of the Canadian Confe,·ence on A 1·tificial Intelli­

gence, Vancounver,

64.6-652,

M.

[20] D . Lehmann.

P h . D . dissertation, University of

Toronto, 1 9 9 2 .

(7]

P. Morris, and J. PearL A m aximu m

tional Workshop on Nonmonotonic Reasoning (forth­

Technical Report R- 1 5 8 ,

Boutilier. Conditional logics for default reasouing

and belief revision.

] C.

,

coming), Vermont, 1992.

NP-complete problems in optimal

horn clauses satisfiability.

Cognitive systems lab, U CL A , 1 990.

[6

Gold sz m idt

[ 1 9] M . Goldszmidt and J . Pearl. Stratified rankings for
causal relations. In Proceedings of the Fourth Interna­

Representing and Reasoning w i t h p,·ob­

abilistic Knowledge, A Logical Approach to Probabili­
ties. The MIT Press, Cambridge. , 1 9 9 1 .

[5] C.

M.

ligence Co nference, pages
[ 1 8]

Dordrecht , Netherlands, 1 9 7 5 .

[4]

H . A. Geffner. Default reasoning: Causal and condi­
tional theories. P h . D . dissertation, U n ive rsi ty of Cal­
ifornia Los Angeles, Computer Science Department,
Los A ngel es , 1 989. Forthcoming, M IT Press.
entropy approach to nonmonotonic reasoning. In Pro­
ceedings of A merican A ssociation for A rtificial Intel­

References
[1]

P. G ardenfors. Knowledge in Flux: Modeling the Dy­
namics of Epistemic States. MIT Press, Cambridge,

J . Pearl. Jeffrey's rule, passage of experience and neo­
B ayesianism. In R. Parikh, editor, Defeasible Rea­
soning and Knowledge Representa tion, pages 1 2 1-135.
Kluwer Publishers, San Mateo, 1 990.

[2 5]

J. Pearl. System Z : A natural ordering of defaults
with tractable applications t.o default reasouing. In
R. Parikh , editor, Proceedings of Theoretical A spects
of Reasoo ing about Knowledge, pages 1 2 1 - 1 3 5 . Mor­
gan Kaufmann, San Mateo, CA, 1990.

[26] D . Poole. A logical framework for defa ult re as oni ng.
A rtific ic1i Intellige nce, 36:27-47, 1 988.
On Spohn's rule for revision of be­
[27] P. P. Shenoy.
liefs. Intemational Journal of Approximate Reason­
ing, 5(2): 149- 1 8 1 , 1 9 9 1 .
[28] Y. Sh oham . Nonmonotonic logics: Meaning and util-

it.r. In Proceedings of In/.emational Conference on A I
(jJCA L87), pages 388-393, Milan, Italy, 1 9 8 7 .

Spohn.
Ordinal conditional functions: A d y­
namic tl1eory of epistemic states. In W. L. Harper
and B. Skyrms, editors, Ca usation in Decision, Belief

(29] W .

Change, and Statistics, pages 105-134. Reidel, Dor­
drecht, Netherlauds, 1987.

